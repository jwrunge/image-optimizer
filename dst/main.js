"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let e=require("sharp"),i=require("path"),t=require("fs");exports.createOptimizationFolders=function(o,r,n){n||(n=[{dir:i.join(o,"images-webp-400"),size:400},{dir:i.join(o,"images-webp-800"),size:800},{dir:i.join(o,"images-webp-1600"),size:1600},{dir:i.join(o,"images-webp-3200"),size:3200}]);let s=i.join(o,r),l=function e(o,r,n=o){let s=t.readdirSync(o);r=r||[];for(let l of s){let s=i.join(o,l);if(t.statSync(s).isDirectory())r=e(s,r,n);else{let e=o.replace(n,"");r.push(i.join(e,l))}}return r}(s);for(let o=0;o<l.length;o++){let r=i.parse(l[o]).name,p=i.parse(l[o]).ext,a=i.basename(l[o]),c=l[o].replace(a,"");if([".jpg",".jpeg",".png",".gif",".webp",".tiff"].includes(p.toLowerCase()))for(let p=0;p<n.length;p++){t.existsSync(i.join(n[p].dir,c))||t.mkdirSync(i.join(n[p].dir,c),{recursive:!0});let a=i.join(n[p].dir,c,r+".webp"),d=t.statSync(i.join(s,l[o])).mtime,g=t.statSync(a).mtime;!t.existsSync(a)||d>g?e(i.join(s,l[o])).rotate().resize({width:n[p].size,withoutEnlargement:!0}).webp().toFile(a,(e,i)=>{e&&console.log(l[o]+": "+e)}):console.log("Skipping existing file "+i.join(n[p].dir,c,r+".webp"))}else console.log("Could not process "+image[o]+": filetype not supported.")}};
//# sourceMappingURL=main.js.map
